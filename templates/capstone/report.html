{% extends "capstone/base.html" %}
{% block page-title %}Report Page{% endblock %}
{% load static %}
{% load humanize %}
{% load filter_extras %}
{% block content %}
    <link rel="stylesheet" type="text/css" href="{% static "css/report.css" %}?{% now "U" %}">
    <h1>Here is your customized financial report:</h1>
    <div id="summary">
        <p>Currently you earn ${{ user_info.salary |intcomma }} per year.</p>
        {% for city_result, salary_compare in user_info.cities|zip:user_info.salary_comparison %}
            <p> This number is {{ salary_compare | salary_percentage|floatformat:2 }}% {{ salary_compare|modifier }}
                than the average
                salary in {{ city_result | city_name }}. </p>
        {% endfor %}
        <h2>Overall Quality of Life</h2>
        <table class="table">
            <tr>
                <th class="first-col"></th>
                {% for city_result in user_info.cities %}
                    <th>{{ city_result | city_name }}   </th>
                {% endfor %}
            </tr>
            <tr>
                <td>Cost of Living to Income Ratio:</td>
                {% for city_quality in overall_quality %}
                    <td>
                        {{ city_quality.cost_of_living_ratio |floatformat:2 }}
                    </td>
                {% endfor %}
            </tr>
            {% if user_info.property_option %}
                <tr>
                    <td>Housing Expense to Income Ratio:</td>
                    {% for city_quality in overall_quality %}
                        <td>
                            {{ city_quality.housing_expense_ratio |floatformat:2 }}
                        </td>
                    {% endfor %}
                </tr>
            {% endif %}
            {% if user_info.healthcare %}
                <tr>
                    <td>Health Care Index:</td>
                    {% for city_quality in overall_quality %}
                        <td>
                            {{ city_quality.health_care_ratio |floatformat:2 }}
                        </td>
                    {% endfor %}
                </tr>
            {% endif %}
            {% if user_info.crime_rate %}
                <tr>
                    <td>Crime Index:</td>
                    {% for city_quality in overall_quality %}
                        <td>
                            {{ city_quality.crime_index |floatformat:2 }}
                        </td>
                    {% endfor %}
                </tr>
                <tr>
                    <td>Safety Index:</td>
                    {% for city_quality in overall_quality %}
                        <td>
                            {{ city_quality.safety_index |floatformat:2 }}
                        </td>
                    {% endfor %}
                </tr>
            {% endif %}
            {% if user_info.food_option %}
                <tr>
                    <td>Food Option Index:</td>
                    {% for city_quality in overall_quality %}
                        <td>
                            {{ city_quality.food_option |floatformat:2 }}
                        </td>
                    {% endfor %}
                </tr>
            {% endif %}
            <tr>
                <td>Overall Quality Index:</td>
                {% for city_quality in overall_quality %}
                    <td>
                        {{ city_quality.overall_index |floatformat:2 }}
                    </td>
                {% endfor %}
            </tr>
        </table>

    </div>
    <h2>Cost of Living Report (Monthly)</h2>
    <table id="cost-living" class="table">
        <tr>
            <th></th>
            {% for city_result in user_info.cities %}
                <th>{{ city_result | city_name }}   </th>
            {% endfor %}
        </tr>
        <tr class="category">
            <td class="category-cell">
                <div class="title">Restaurant:</div>
            </td>
        </tr>
        <tr>
            <td>Estimated Expense:</td>
            {% for city_result in cities_living_expense %}
                <td>
                    ${{ city_result.restaurant |floatformat:2|intcomma }}
                </td>
            {% endfor %}
        </tr>
        <tr>
            <td>
                <div class="title">Grocery:</div>
            </td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Estimated Grocery Expense:</td>
            {% for city_result in cities_living_expense %}
                <td>
                    ${{ city_result.grocery |floatformat:2|intcomma }}
                </td>
            {% endfor %}
        </tr>
        <tr>
            <td>Estimated Smoking Expense:</td>
            {% for city_result in cities_living_expense %}
                <td>
                    ${{ city_result.smoking |floatformat:2|intcomma }}
                </td>
            {% endfor %}
        </tr>
        <tr>
            <td>Estimated Alcohol Expense:</td>
            {% for city_result in cities_living_expense %}
                <td>
                    ${{ city_result.alcohol |floatformat:2|intcomma }}
                </td>
            {% endfor %}
        </tr>
        <tr>
            <td>
                <div class="title">Transportation:</div>
            </td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Estimated Public Transportation Expense:</td>
            {% for city_result in cities_living_expense %}
                <td>
                    ${{ city_result.public_transportation |floatformat:2|intcomma }}
                </td>
            {% endfor %}
        </tr>
        <tr>
            <td>
                Estimated Taxi and Ride Share Expense:
            </td>
            {% for city_result in cities_living_expense %}
                <td>
                    ${{ city_result.ride_share |floatformat:2|intcomma }}
                </td>
            {% endfor %}
        </tr>
        <tr>
            <td>
                Estimated Gas Expense:
            </td>
            {% for city_result in cities_living_expense %}
                <td>
                    ${{ city_result.gas |floatformat:2|intcomma }}
                </td>
            {% endfor %}
        </tr>
        <tr>
            <td>
                <div class="title">Entertainment:</div>
            </td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>
                Estimated Fitness Center Expense:
            </td>
            {% for city_result in cities_living_expense %}
                <td>
                    ${{ city_result.fitness |floatformat:2|intcomma }}
                </td>
            {% endfor %}
        </tr>
        <tr>
            <td>
                Estimated Cinema and Nightlife Expense:
            </td>
            {% for city_result in cities_living_expense %}
                <td>
                    ${{ city_result.cinema |floatformat:2|intcomma }}
                </td>
            {% endfor %}
        </tr>
        <tr>
            <td>
                Estimated Vacation Expense (amortized by month):
            </td>
            {% for city_result in cities_living_expense %}
                <td>
                    ${{ city_result.vacation |floatformat:2|intcomma }}
                </td>
            {% endfor %}
        </tr>
        <tr>
            <td>
                <div class="title">Shopping Spending:</div>
            </td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Estimated Shopping Spending:</td>
            {% for city_result in cities_living_expense %}
                <td>
                    ${{ city_result.clothing |floatformat:2|intcomma }}
                </td>
            {% endfor %}
        </tr>
        <tr>
            <td>
                <div class="title">Total Household Estimated Spending:</div>
            </td>
            {% for city_result in cities_living_expense %}
                <td>
                    ${{ city_result.total |floatformat:2|intcomma }}
                </td>
            {% endfor %}
        </tr>
    </table>
    {% if user_info.property_option %}
        <h2 class="report">Cost of Property Report</h2>
        <table id="cost-property" class="table">
            <tr>
                <th class="first-col"></th>
                {% for city_result in user_info.cities %}
                    <th>{{ city_result | city_name }}   </th>
                {% endfor %}
            </tr>
            <tr>
                {% if cities_property_expense.0.rent_or_buy == "Rent" %}
                    <td>You have chosen the <strong>Rent</strong> &#8202 option</td>

                {% else %}
                    <td> You have choose the <strong>Buy</strong> &#8202 option:</td>
                {% endif %}

            </tr>
            <tr>
                <td>
                    {% if cities_property_expense.0.rent_or_buy == "Rent" %}

                        For {{ cities_property_expense.0.property_size }} Apartment:

                    {% else %}

                        For {{ cities_property_expense.0.property_size }} &#8202 sqft:

                    {% endif %}
                </td>
                <td></td>
                <td></td>
                <td></td>

            </tr>
            <tr>
                <td>Estimated Monthly Payment:
                    {% if cities_property_expense.0.rent_or_buy == "Buy" %}
                        <div>(For 20 Years Fixed Rate)</div>
                    {% endif %}
                </td>
                {% for city_property in cities_property_expense %}
                    <td>
                        ${{ city_property.monthly_payment |floatformat:2|intcomma }}
                    </td>
                {% endfor %}
            </tr>
        </table>
    {% endif %}
    {% if user_info.childcare %}
        <h2>Cost of Child Care Report</h2>
        <table id="child-care" class="table">
            <tr>
                <th class="first-col"></th>
                {% for city_result in user_info.cities %}
                    <th>{{ city_result | city_name }}   </th>
                {% endfor %}
            </tr>
            <tr>
                <td>Estimated Daycare Monthly Expense:
                </td>
                {% for city_child_care in child_care %}
                    <td>
                        ${{ city_child_care.daycare_cost |floatformat:2|intcomma }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Estimated Private School Monthly Expense:
                </td>
                {% for city_child_care in child_care %}
                    <td>
                        ${{ city_child_care.private_school_cost |floatformat:2|intcomma }}
                    </td>
                {% endfor %}
            </tr>

        </table>
    {% endif %}
    {% if user_info.healthcare %}
        <h2>Health Care Report</h2>
        <table id="health-care" class="table">
            <tr>
                <th class="first-col"></th>
                {% for city_result in user_info.cities %}
                    <th>{{ city_result | city_name }}   </th>
                {% endfor %}
            </tr>
            <tr>
                <td>
                    <div class="title">Healthcare Quality(%):</div>
                </td>
            </tr>
            <tr>
                <td>Skill and competency of medical staff:</td>
                {% for city_health in cities_health_care %}
                    <td>
                        {{ city_health.skill |floatformat:2 }} &#160 {{ city_health.skill|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Speed in completing examination and reports</td>
                {% for city_health in cities_health_care %}
                    <td>
                        {{ city_health.speed |floatformat:2 }} &#160 {{ city_health.speed|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Equipment for modern diagnosis and treatment</td>
                {% for city_health in cities_health_care %}
                    <td>
                        {{ city_health.equipment |floatformat:2 }} &#160 {{ city_health.equipment|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Accuracy and completeness in filling out reports</td>
                {% for city_health in cities_health_care %}
                    <td>
                        {{ city_health.accuracy |floatformat:2 }} &#160 {{ city_health.accuracy|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Friendliness and courtesy of the staff</td>
                {% for city_health in cities_health_care %}
                    <td>
                        {{ city_health.friendliness |floatformat:2 }} &#160 {{ city_health.friendliness|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Satisfaction with responsiveness (waiting time) in medical institutions</td>
                {% for city_health in cities_health_care %}
                    <td>
                        {{ city_health.satisfaction_responsiveness |floatformat:2 }}
                        &#160 {{ city_health.satisfaction_responsiveness|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Satisfaction with cost to you</td>
                {% for city_health in cities_health_care %}
                    <td>
                        {{ city_health.satisfaction_cost |floatformat:2 }}
                        &#160 {{ city_health.satisfaction_cost|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Convenience of location for you</td>
                {% for city_health in cities_health_care %}
                    <td>
                        {{ city_health.location |floatformat:2 }} &#160 {{ city_health.location|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>
                    <div class="title">Health Care Expense (Per Visit):</div>
                </td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>Doctor's Visit</td>
                {% for city_health in cities_health_care %}
                    <td>
                        ${{ city_health.doctor_visit |floatformat:2 }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Dentist Visit</td>
                {% for city_health in cities_health_care %}
                    <td>
                        ${{ city_health.dentist_visit |floatformat:2 }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Optometrist Visit</td>
                {% for city_health in cities_health_care %}
                    <td>
                        ${{ city_health.optometrist_visit |floatformat:2 }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>RX Drug</td>
                {% for city_health in cities_health_care %}
                    <td>
                        ${{ city_health.RX_drug |floatformat:2 }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Veterinary Visit</td>
                {% for city_health in cities_health_care %}
                    <td>
                        ${{ city_health.veterinary_visit |floatformat:2 }}
                    </td>
                {% endfor %}
            </tr>
        </table>
    {% endif %}
    {% if user_info.crime_rate %}
        <h2>Crime and Safety Report</h2>
        <table id="crime-rate" class="table">
            <tr>
                <th class="first-col"></th>
                {% for city_result in user_info.cities %}
                    <th>{{ city_result | city_name }}   </th>
                {% endfor %}
            </tr>
            <tr>
                <td>
                    <div class="title">Crime Rates:</div>
                </td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>Level of crime</td>
                {% for city_crime in cities_crime_rate %}
                    <td>
                        {{ city_crime.crime_level |floatformat:2 }} &#160 {{ city_crime.crime_level|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Crime increasing in the past 3 years</td>
                {% for city_crime in cities_crime_rate %}
                    <td>
                        {{ city_crime.crime_increasing|floatformat:2 }} &#160 {{ city_crime.crime_increasing|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Worries home broken and things stolen</td>
                {% for city_crime in cities_crime_rate %}
                    <td>
                        {{ city_crime.home_broken|floatformat:2 }} &#160 {{ city_crime.home_broken|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Worries being mugged or robbed</td>
                {% for city_crime in cities_crime_rate %}
                    <td>
                        {{ city_crime.mugged_or_robbed|floatformat:2 }} &#160 {{ city_crime.mugged_or_robbed|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Worries car stolen</td>
                {% for city_crime in cities_crime_rate %}
                    <td>
                        {{ city_crime.car_stolen|floatformat:2 }} &#160 {{ city_crime.car_stolen|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Worries things from car stolen</td>
                {% for city_crime in cities_crime_rate %}
                    <td>
                        {{ city_crime.things_from_car|floatformat:2 }} &#160 {{ city_crime.things_from_car|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Worries attacked</td>
                {% for city_crime in cities_crime_rate %}
                    <td>
                        {{ city_crime.worries_attack|floatformat:2 }} &#160 {{ city_crime.worries_attack|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Worries being insulted</td>
                {% for city_crime in cities_crime_rate %}
                    <td>
                        {{ city_crime.worries_insult|floatformat:2 }} &#160 {{ city_crime.worries_insult|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Worries being subject to a physical attack because of racism</td>
                {% for city_crime in cities_crime_rate %}
                    <td>
                        {{ city_crime.worries_racist|floatformat:2 }} &#160 {{ city_crime.worries_racist|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Problem people using or dealing drugs</td>
                {% for city_crime in cities_crime_rate %}
                    <td>
                        {{ city_crime.problem_drugs|floatformat:2 }} &#160 {{ city_crime.problem_drugs|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Problem property crimes such as vandalism and theft</td>
                {% for city_crime in cities_crime_rate %}
                    <td>
                        {{ city_crime.property_crime|floatformat:2 }} &#160 {{ city_crime.property_crime|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Problem violent crimes such as assault and armed robbery</td>
                {% for city_crime in cities_crime_rate %}
                    <td>
                        {{ city_crime.violent_crime|floatformat:2 }} &#160 {{ city_crime.violent_crime|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Problem corruption and bribery</td>
                {% for city_crime in cities_crime_rate %}
                    <td>
                        {{ city_crime.corruption|floatformat:2 }} &#160 {{ city_crime.corruption|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>
                    <div class="title">Safety Concerns:</div>
                </td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>Safety walking alone during daylight</td>
                {% for city_crime in cities_crime_rate %}
                    <td>
                        {{ city_crime.safety_day|floatformat:2 }} &#160 {{ city_crime.safety_day|rating }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Safety walking alone during night</td>
                {% for city_crime in cities_crime_rate %}
                    <td>
                        {{ city_crime.safety_night|floatformat:2 }} &#160 {{ city_crime.safety_night|rating }}
                    </td>
                {% endfor %}
            </tr>
        </table>
    {% endif %}
    {% if user_info.food_option %}
        <h2>Food and Restaurant Option Report:</h2>
        <table id="food-option" class="table">
            <tr>
                <th class="first-col"></th>
                {% for city_result in user_info.cities %}
                    <th>{{ city_result | city_name }}   </th>
                {% endfor %}
            </tr>
            <tr>
                <td>Restaurants per Square Mile</td>
                {% for city_food in cities_food_option %}
                    <td>
                        {{ city_food.restaurant_mile|floatformat:2 }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Score for overall diversity and proximity of cuisines (lower is better)</td>
                {% for city_food in cities_food_option %}
                    <td>
                        {{ city_food.diversity_score|floatformat:2 }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Cuisines per Metro</td>
                {% for city_food in cities_food_option %}
                    <td>
                        {{ city_food.cuisine_per_metro|floatformat:2 }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>Dollars Spent Out vs. at Dollars Spent at Groceries</td>
                {% for city_food in cities_food_option %}
                    <td>
                        {{ city_food.dine_out_money|floatformat:2 }}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>
                    <div class="title">Final Index (out of 100 possible):</div>
                </td>
                {% for city_food in cities_food_option %}
                    <td>
                        {{ city_food.final_index|floatformat:2 }}
                    </td>
                {% endfor %}
            </tr>
        </table>
    {% endif %}
{% endblock %}